const options = {
    data() {

        return {
            ingredients:[],
            ingredient: "",
            cocktails: [],
            searchName:"Mojito",
            errorMessage :"",
            selectedIngredient:""
        };
    },
    mounted() {
        this.$nextTick(() => {
        this.search_ingredient();
        });
    },
    methods: {
        fillResult(data){
            if(data !== undefined && data !== null && data.length > 0 ) {
                this.cocktails = data
                this.errorMessage = ""
            }
            else {
                this.cocktails = []
                this.errorMessage = "Aucun cocktail trouvÃ©"
            }
        },
        showRandomCocktail(){
            fetch("https://www.thecocktaildb.com/api/json/v1/1/random.php")
            .then(response=>response.json())
            .then(data=>{
                this.fillResult(data["drinks"])
            })
        },
        showCocktailByName(){
            fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s=" + this.searchName)
            .then(response=>response.json())
            .then(data=>{
                this.fillResult(data["drinks"])
            })
        },
        search_ingredient(){
            fetch("https://www.thecocktaildb.com/api/json/v1/1/list.php?i=list")
            .then(response=>response.json())
            .then(data=>{
                this.ingredients=data["drinks"]
            })
        },
        searchByingredient(){
            fetch("https://www.thecocktaildb.com/api/json/v1/1/filter.php?i=" + this.selectedIngredient)
            .then(response=>response.json())
            .then(data=>{
                //on va chercher que le 1er
                fetch("https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=" + data["drinks"][0]["idDrink"])
                .then(response=>response.json())
                .then(data2=>{
                    this.fillResult(data2["drinks"])
                })
                
            })
        },
        
    }
    };

Vue.createApp(options).mount("#app");

/*
const { createApp } = Vue
createApp({
data() {
    return {
        cocktails:[
                {
                        "strDrink" : "Tequila Fizz",
                        "strAlcoholic" : "Alcoholic",
                        "strCategory" : "Ordinary Drink",
                        "strDrinkThumb" :"https://www.thecocktaildb.com/images/media/drink/2bcase1504889637.jpg",
                        "strIngredient1" : "Tequila",
                        "strIngredient2" : "Lemon juice",
                        "strIngredient3" : "Grenadine",
                        "strIngredient4" : "Egg white",
                        "strIngredient5" : "Ginger ale",
                        "strIngredient6" : null,
                        "strIngredient7" : null,
                        "strIngredient8" : null,
                        "strIngredient9" : null,
                        "strIngredient10" : null,
                        "strIngredient11" : null,
                        "strIngredient12" : null,
                        "strIngredient13" : null,
                        "strIngredient14" : null,
                        "strIngredient15" : null, 
                        
                        "ingredients": [ {
                        "strIngredient1" : "Tequila",
                        "strIngredient2" : "Lemon juice",
                        "strIngredient3" : "Grenadine",
                        "strIngredient4" : "Egg white",
                        "strIngredient5" : "Ginger ale",
                        "strIngredient6" : null,
                        "strIngredient7" : null,
                        "strIngredient8" : null,
                        "strIngredient9" : null,
                        "strIngredient10" : null,
                        "strIngredient11" : null,
                        "strIngredient12" : null,
                        "strIngredient13" : null,
                        "strIngredient14" : null,
                        "strIngredient15" : null }
                        ]
                        
                },  
                {
                        "strDrink" : "Cosmopolitan",
                        "strAlcoholic" : "Alcoholic",
                        "strCategory" : "Cocktail",
                        "strDrinkThumb" :"https://www.thecocktaildb.com/images/media/drink/kpsajh1504368362.jpg",
                        "strIngredient1" : "Absolut Citron",
                        "strIngredient2" : "Lime juice",
                        "strIngredient3" : "Cointreau",
                        "strIngredient4" : "Cranberry juice",
                        "strIngredient5" : null,
                        "strIngredient6" : null,
                        "strIngredient7" : null,
                        "strIngredient8" : null,
                        "strIngredient9" : null,
                        "strIngredient10" : null,
                        "strIngredient11" : null,
                        "strIngredient12" : null,
                        "strIngredient13" : null,
                        "strIngredient14" : null,
                        "strIngredient15" : null
                }  
            ],
            search:'',
    }
},
methods: {
            showCocktailByName(){
                fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s=" + this.searchName)
                .then(response=>response.json())
                .then(data=>{
                    this.cocktails = data["drinks"]
                })
            },
            showRandomCocktail(){
                fetch("https://www.thecocktaildb.com/api/json/v1/1/random.php")
                .then(response=>response.json())
                .then(data=>{
                    this.cocktails = data["drinks"]
                })
            },


            find_cocktail() {
            fetch("www.thecocktaildb.com/api/json/v1/1/random.php")
                .then(response=>response.json())
                .then(data=>{
                    this.cocktails = data["drinks"]
                    this.cocktail=data;
                })
            },
        },
}).mount('#app')  
*/